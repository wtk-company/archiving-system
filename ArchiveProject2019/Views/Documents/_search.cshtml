@model IEnumerable<ArchiveProject2019.Models.Document>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">


<table id="form" class="table table-striped table-hover " style="text-align:center">
    <thead class="just-first-header">
   
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Form.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Department.Name)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Subject)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreatedAt)
                </td>
                <td>
                    <a href="@Url.Action("Edit","Documents",new { id=item.Id})" title="تفاصيل" class="btn-link  btn-xs  glyphicon glyphicon-edit"></a>
                    <button data-form-id="@item.Id" title="حذف" class="js-delete btn-xs btn-link"><span class="glyphicon glyphicon-trash"></span></button>
                    <a href="@Url.Action("Details","Documents",new { id=item.Id})" title="تفاصيل" class="btn-link js-Details  btn-xs  glyphicon glyphicon-book"></a>
                </td>
            </tr>
        }
    </tbody>


</table>







<div class="modal" tabindex="-1" id="NewModal" sdata-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h4 id="changeText" class="modal-title"></h4>
            </div>
            <div class="modal-body" id="partialPlaceHolder">

            </div>
        </div>
    </div>
</div>





<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script>

    $("#btnNewModel").on("click", function () {


        $("#changeText").text("القائمة الفرعية- إختيار نموذج معين");
        var url = '@Url.Action("form", "Documents")'

        $("#partialPlaceHolder").load(url, function () {
            $('#NewModal').modal('show');
        });

    });

    $("#btnRefreshModel").on("click", function () {

        window.location.replace('@Url.Action("Index","Documents",new { Id="none"})');


    });





    $("#form").on("click", ".js-delete", function () {
        $("#changeText").text("القائمة الفرعية- حذف وثيقة معين");

        var url = '@Url.Action("Delete", "Documents")';
        url = url + '/' + $(this).attr("data-form-id");

        $("#partialPlaceHolder").load(url, function () {
            $('#NewModal').modal('show');
        });

    });

        var RecordCount = 0;
    var DN = document.getElementById('DocNum').value;
    var DA = document.getElementById('DocAddress').value;

    $("#form").on("click", ".js-delete", function () {
        $("#changeText").text("القائمة الفرعية- حذف وثيقة معين");

        var url = '@Url.Action("Delete", "Documents")';
        url = url + '/' + $(this).attr("data-form-id");

        $("#partialPlaceHolder").load(url, function () {
            $('#NewModal').modal('show');
        });

    });



    //    $(window).scroll(function () {
    //    //Scroll hareket ettiği zaman devreye girer.
    //    if ($(window).scrollTop() == $(document).height() - $(window).height()) {
    //        //Bu algoritma ile ScrollBar'ın sayfanın en aşağı indiği anı yakalarız.
    //        $.ajax({
    //            url: '/Documents/Search',
    //            data: { RecordCount: RecordCount, DocNum: DN, DocAddress: DA },
    //            //Index Action metodunun aldığı sayfano isimli parametreye SayfaSayisi değişkenindeki değeri gönderiyoruz.
    //            success: function (data) {
    //                $("#SearchResult").append(data);
    //                SayfaSayisi++;
    //            }
    //        });
    //    }
    //});

</script>

